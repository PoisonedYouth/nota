<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/base :: layout(~{::content})}">
<body>
    <div th:fragment="content">
        <div class="container">
            <div class="notes-header">
                <h2>General Activity Log</h2>
                <div class="header-actions">
                    <a href="/notes" class="btn btn-secondary">Back to Notes</a>
                </div>
            </div>

            <div class="activity-log-container">
                <div th:if="${#lists.isEmpty(activities)}" class="empty-state">
                    <p>No activities yet</p>
                </div>

                <div th:if="${!#lists.isEmpty(activities)}" class="activity-list">
                    <div th:each="activity : ${activities}" class="activity-item">
                        <div class="activity-icon">
                            <span th:switch="${activity.action}">
                                <span th:case="'CREATE'">‚ûï</span>
                                <span th:case="'UPDATE'">‚úèÔ∏è</span>
                                <span th:case="'ARCHIVE'">üì¶</span>
                                <span th:case="'SHARE'">üîó</span>
                                <span th:case="*">üìù</span>
                            </span>
                        </div>
                        <div class="activity-content">
                            <div class="activity-description" th:text="${activity.description}"></div>
                            <div class="activity-meta">
                                <span class="activity-time" th:text="${activity.formattedCreatedAt}"></span>
                                <span class="activity-type" th:text="${activity.action}"></span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Pagination Controls -->
                <div th:if="${totalPages > 1}" class="pagination-container">
                    <div class="pagination-info">
                        <span th:text="'Page ' + (${currentPage} + 1) + ' of ' + ${totalPages} + ' (' + ${totalElements} + ' activities total)'"></span>
                    </div>
                    <div class="pagination-controls">
                        <!-- Previous Page -->
                        <a th:if="${hasPrevious}"
                           th:href="@{/notes/activity-log(page=${currentPage - 1}, size=${pageSize})}"
                           class="btn btn-secondary">
                            ‚Üê Previous
                        </a>
                        <span th:unless="${hasPrevious}" class="btn btn-secondary disabled">‚Üê Previous</span>

                        <!-- Page Numbers -->
                        <div class="page-numbers">
                            <!-- First page -->
                            <a th:if="${currentPage > 2}"
                               th:href="@{/notes/activity-log(page=0, size=${pageSize})}"
                               class="btn btn-outline">1</a>
                            <span th:if="${currentPage > 3}" class="pagination-ellipsis">...</span>

                            <!-- Previous page -->
                            <a th:if="${currentPage > 0}"
                               th:href="@{/notes/activity-log(page=${currentPage - 1}, size=${pageSize})}"
                               class="btn btn-outline"
                               th:text="${currentPage}"></a>

                            <!-- Current page -->
                            <span class="btn btn-primary current-page" th:text="${currentPage + 1}"></span>

                            <!-- Next page -->
                            <a th:if="${currentPage < totalPages - 1}"
                               th:href="@{/notes/activity-log(page=${currentPage + 1}, size=${pageSize})}"
                               class="btn btn-outline"
                               th:text="${currentPage + 2}"></a>

                            <!-- Last page -->
                            <span th:if="${currentPage < totalPages - 4}" class="pagination-ellipsis">...</span>
                            <a th:if="${currentPage < totalPages - 3}"
                               th:href="@{/notes/activity-log(page=${totalPages - 1}, size=${pageSize})}"
                               class="btn btn-outline"
                               th:text="${totalPages}"></a>
                        </div>

                        <!-- Next Page -->
                        <a th:if="${hasNext}"
                           th:href="@{/notes/activity-log(page=${currentPage + 1}, size=${pageSize})}"
                           class="btn btn-secondary">
                            Next ‚Üí
                        </a>
                        <span th:unless="${hasNext}" class="btn btn-secondary disabled">Next ‚Üí</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
