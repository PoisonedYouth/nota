Running backend tests with Amper...
./amper test
Logs are in file:///Users/poisonedyouth/IdeaProjects/private/nota/build/logs/amper_2025-09-06_21-17-54_62755_test
00:01.478 INFO  :nota:testJvm             Testing module 'nota' for platform 'jvm'...
Warning: Kotest autoscan is enabled. This means Kotest will scan the classpath for extensions that are annotated with @AutoScan. To avoid this startup cost, set autoscan to false by setting the system property 'kotest.framework.classpath.scanning.config.disable=true'. In 6.0 this value will default to true. For further details see https://kotest.io/docs/next/framework/project-config.html#runtime-detection
Started ActivityRestControllerTest
Started should return activities page()
WARNING: A Java agent has been loaded dynamically (/Users/poisonedyouth/Library/Caches/Amper/.m2.cache/net/bytebuddy/byte-buddy-agent/1.15.11/byte-buddy-agent-1.15.11.jar)
WARNING: If a serviceability tool is in use, please run with -XX:+EnableDynamicAgentLoading to hide this warning
WARNING: If a serviceability tool is not in use, please run with -Djdk.instrument.traceUsage for more information
WARNING: Dynamic loading of agents will be disallowed by default in a future release
OpenJDK 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended
21:17:59.004 [main] INFO org.hibernate.validator.internal.util.Version -- HV000001: Hibernate Validator 8.0.2.Final
21:17:59.249 [main] INFO org.springframework.mock.web.MockServletContext -- Initializing Spring TestDispatcherServlet ''
21:17:59.249 [main] INFO org.springframework.test.web.servlet.TestDispatcherServlet -- Initializing Servlet ''
21:17:59.250 [main] INFO org.springframework.test.web.servlet.TestDispatcherServlet -- Completed initialization in 1 ms
Passed should return activities page()
Started should return recent activities()
21:17:59.447 [main] INFO org.springframework.mock.web.MockServletContext -- Initializing Spring TestDispatcherServlet ''
21:17:59.447 [main] INFO org.springframework.test.web.servlet.TestDispatcherServlet -- Initializing Servlet ''
21:17:59.447 [main] INFO org.springframework.test.web.servlet.TestDispatcherServlet -- Completed initialization in 0 ms
Passed should return recent activities()
Started should return all activities()
21:17:59.661 [main] INFO org.springframework.mock.web.MockServletContext -- Initializing Spring TestDispatcherServlet ''
21:17:59.661 [main] INFO org.springframework.test.web.servlet.TestDispatcherServlet -- Initializing Servlet ''
21:17:59.661 [main] INFO org.springframework.test.web.servlet.TestDispatcherServlet -- Completed initialization in 0 ms
Passed should return all activities()
Passed ActivityRestControllerTest
Started NoteSharingRestControllerTest
Started should list note shares()
21:17:59.716 [main] INFO org.springframework.mock.web.MockServletContext -- Initializing Spring TestDispatcherServlet ''
21:17:59.716 [main] INFO org.springframework.test.web.servlet.TestDispatcherServlet -- Initializing Servlet ''
21:17:59.716 [main] INFO org.springframework.test.web.servlet.TestDispatcherServlet -- Completed initialization in 0 ms
Passed should list note shares()
Started should share note with user()
21:17:59.736 [main] INFO org.springframework.mock.web.MockServletContext -- Initializing Spring TestDispatcherServlet ''
21:17:59.736 [main] INFO org.springframework.test.web.servlet.TestDispatcherServlet -- Initializing Servlet ''
21:17:59.736 [main] INFO org.springframework.test.web.servlet.TestDispatcherServlet -- Completed initialization in 0 ms
Passed should share note with user()
Started should list archived notes()
21:17:59.769 [main] INFO org.springframework.mock.web.MockServletContext -- Initializing Spring TestDispatcherServlet ''
21:17:59.769 [main] INFO org.springframework.test.web.servlet.TestDispatcherServlet -- Initializing Servlet ''
21:17:59.769 [main] INFO org.springframework.test.web.servlet.TestDispatcherServlet -- Completed initialization in 0 ms
Passed should list archived notes()
Started should revoke note share()
21:17:59.782 [main] INFO org.springframework.mock.web.MockServletContext -- Initializing Spring TestDispatcherServlet ''
21:17:59.782 [main] INFO org.springframework.test.web.servlet.TestDispatcherServlet -- Initializing Servlet ''
21:17:59.782 [main] INFO org.springframework.test.web.servlet.TestDispatcherServlet -- Completed initialization in 0 ms
Passed should revoke note share()
Passed NoteSharingRestControllerTest
Started UserRestControllerExtendedTest
Started should change password()
21:17:59.808 [main] INFO org.springframework.mock.web.MockServletContext -- Initializing Spring TestDispatcherServlet ''
21:17:59.808 [main] INFO org.springframework.test.web.servlet.TestDispatcherServlet -- Initializing Servlet ''
21:17:59.808 [main] INFO org.springframework.test.web.servlet.TestDispatcherServlet -- Completed initialization in 0 ms
Passed should change password()
Started should logout()
21:17:59.865 [main] INFO org.springframework.mock.web.MockServletContext -- Initializing Spring TestDispatcherServlet ''
21:17:59.865 [main] INFO org.springframework.test.web.servlet.TestDispatcherServlet -- Initializing Servlet ''
21:17:59.865 [main] INFO org.springframework.test.web.servlet.TestDispatcherServlet -- Completed initialization in 0 ms
Passed should logout()
Started should return current user()
21:17:59.872 [main] INFO org.springframework.mock.web.MockServletContext -- Initializing Spring TestDispatcherServlet ''
21:17:59.872 [main] INFO org.springframework.test.web.servlet.TestDispatcherServlet -- Initializing Servlet ''
21:17:59.872 [main] INFO org.springframework.test.web.servlet.TestDispatcherServlet -- Completed initialization in 0 ms
Passed should return current user()
Passed UserRestControllerExtendedTest
Started NoteE2ETest
21:17:59.892 [main] INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils -- Could not detect default configuration classes for test class [com.poisonedyouth.nota.notes.NoteE2ETest]: NoteE2ETest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
21:17:59.946 [main] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper -- Found @SpringBootConfiguration com.poisonedyouth.nota.Application for test class com.poisonedyouth.nota.notes.NoteE2ETest
21:17:59.976 [main] INFO org.springframework.boot.devtools.restart.RestartApplicationListener -- Restart disabled due to context in which it is running
  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v3.4.3)
2025-09-06T21:18:00.069+02:00  INFO 62763 --- [           main] c.poisonedyouth.nota.notes.NoteE2ETest   : Starting NoteE2ETest using Java 21.0.1 with PID 62763 (started by poisonedyouth in /Users/poisonedyouth/IdeaProjects/private/nota)
2025-09-06T21:18:00.070+02:00  INFO 62763 --- [           main] c.poisonedyouth.nota.notes.NoteE2ETest   : The following 1 profile is active: "test"
2025-09-06T21:18:00.382+02:00  INFO 62763 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-09-06T21:18:00.417+02:00  INFO 62763 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 24 ms. Found 5 JPA repository interfaces.
2025-09-06T21:18:00.699+02:00  INFO 62763 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-09-06T21:18:00.715+02:00  INFO 62763 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.8.Final
2025-09-06T21:18:00.729+02:00  INFO 62763 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-09-06T21:18:00.775+02:00  INFO 62763 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-09-06T21:18:00.785+02:00  INFO 62763 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-09-06T21:18:00.854+02:00  INFO 62763 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-09-06T21:18:00.855+02:00  INFO 62763 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-09-06T21:18:00.864+02:00  WARN 62763 --- [           main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-09-06T21:18:00.872+02:00  INFO 62763 --- [           main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
        Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
        Database driver: undefined/unknown
        Database version: 2.3.232
        Autocommit mode: undefined/unknown
        Isolation level: undefined/unknown
        Minimum pool size: undefined/unknown
        Maximum pool size: undefined/unknown
2025-09-06T21:18:01.128+02:00  INFO 62763 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-09-06T21:18:01.148+02:00  INFO 62763 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-09-06T21:18:01.353+02:00  INFO 62763 --- [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-09-06T21:18:02.468+02:00  WARN 62763 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-09-06T21:18:02.492+02:00  INFO 62763 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name notaUserDetailsService
2025-09-06T21:18:02.696+02:00  INFO 62763 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint beneath base path '/actuator'
2025-09-06T21:18:02.927+02:00  INFO 62763 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-09-06T21:18:02.946+02:00  INFO 62763 --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:02.946+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:02.946+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-09-06T21:18:02.983+02:00  INFO 62763 --- [           main] c.poisonedyouth.nota.notes.NoteE2ETest   : Started NoteE2ETest in 3.009 seconds (process running for 7.034)
Started should display owner information in note list view()
OpenJDK 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended
2025-09-06T21:18:03.335+02:00  WARN 62763 --- [           main] actStandardFragmentInsertionTagProcessor : [THYMELEAF][main][notes/list] Deprecated unwrapped fragment expression "notes/fragments :: note-card(note=${note})" found in template notes/list, line 72, col 26. Please use the complete syntax of fragment expressions instead ("~{notes/fragments :: note-card(note=${note})}"). The old, unwrapped syntax for fragment expressions will be removed in future versions of Thymeleaf.
Passed should display owner information in note list view()
Started should apply due-soon CSS class to notes due within 24 hours in HTML()
2025-09-06T21:18:03.371+02:00  WARN 62763 --- [           main] actStandardFragmentInsertionTagProcessor : [THYMELEAF][main][notes/list] Deprecated unwrapped fragment expression "notes/fragments :: note-card(note=${note})" found in template notes/list, line 72, col 26. Please use the complete syntax of fragment expressions instead ("~{notes/fragments :: note-card(note=${note})}"). The old, unwrapped syntax for fragment expressions will be removed in future versions of Thymeleaf.
Passed should apply due-soon CSS class to notes due within 24 hours in HTML()
Started should search notes and return results in HTML()
2025-09-06T21:18:03.395+02:00  WARN 62763 --- [           main] actStandardFragmentInsertionTagProcessor : [THYMELEAF][main][notes/list] Deprecated unwrapped fragment expression "notes/fragments :: note-card(note=${note})" found in template notes/list, line 72, col 26. Please use the complete syntax of fragment expressions instead ("~{notes/fragments :: note-card(note=${note})}"). The old, unwrapped syntax for fragment expressions will be removed in future versions of Thymeleaf.
2025-09-06T21:18:03.396+02:00  WARN 62763 --- [           main] actStandardFragmentInsertionTagProcessor : [THYMELEAF][main][notes/list] Deprecated unwrapped fragment expression "notes/fragments :: note-card(note=${note})" found in template notes/list, line 72, col 26. Please use the complete syntax of fragment expressions instead ("~{notes/fragments :: note-card(note=${note})}"). The old, unwrapped syntax for fragment expressions will be removed in future versions of Thymeleaf.
Passed should search notes and return results in HTML()
Started should apply overdue CSS class to overdue notes in HTML()
2025-09-06T21:18:03.412+02:00  WARN 62763 --- [           main] actStandardFragmentInsertionTagProcessor : [THYMELEAF][main][notes/list] Deprecated unwrapped fragment expression "notes/fragments :: note-card(note=${note})" found in template notes/list, line 72, col 26. Please use the complete syntax of fragment expressions instead ("~{notes/fragments :: note-card(note=${note})}"). The old, unwrapped syntax for fragment expressions will be removed in future versions of Thymeleaf.
Passed should apply overdue CSS class to overdue notes in HTML()
Started should return 200 OK when accessing notes endpoint()
Passed should return 200 OK when accessing notes endpoint()
Started should return empty search results when no matches found()
Passed should return empty search results when no matches found()
Started should display owner information in note detail view()
Passed should display owner information in note detail view()
Started should create and retrieve notes correctly()
Passed should create and retrieve notes correctly()
Started should not apply special CSS classes to notes with future due dates in HTML()
2025-09-06T21:18:03.508+02:00  WARN 62763 --- [           main] actStandardFragmentInsertionTagProcessor : [THYMELEAF][main][notes/list] Deprecated unwrapped fragment expression "notes/fragments :: note-card(note=${note})" found in template notes/list, line 72, col 26. Please use the complete syntax of fragment expressions instead ("~{notes/fragments :: note-card(note=${note})}"). The old, unwrapped syntax for fragment expressions will be removed in future versions of Thymeleaf.
Passed should not apply special CSS classes to notes with future due dates in HTML()
Started should not apply special CSS classes to notes without due dates in HTML()
2025-09-06T21:18:03.520+02:00  WARN 62763 --- [           main] actStandardFragmentInsertionTagProcessor : [THYMELEAF][main][notes/list] Deprecated unwrapped fragment expression "notes/fragments :: note-card(note=${note})" found in template notes/list, line 72, col 26. Please use the complete syntax of fragment expressions instead ("~{notes/fragments :: note-card(note=${note})}"). The old, unwrapped syntax for fragment expressions will be removed in future versions of Thymeleaf.
Passed should not apply special CSS classes to notes without due dates in HTML()
Passed NoteE2ETest
Started MainKtTest
2025-09-06T21:18:03.524+02:00  INFO 62763 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.poisonedyouth.nota.MainKtTest]: MainKtTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-09-06T21:18:03.526+02:00  INFO 62763 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.poisonedyouth.nota.Application for test class com.poisonedyouth.nota.MainKtTest
2025-09-06T21:18:03.528+02:00  INFO 62763 --- [           main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v3.4.3)
2025-09-06T21:18:03.536+02:00  INFO 62763 --- [           main] com.poisonedyouth.nota.MainKtTest        : Starting MainKtTest using Java 21.0.1 with PID 62763 (started by poisonedyouth in /Users/poisonedyouth/IdeaProjects/private/nota)
2025-09-06T21:18:03.536+02:00  INFO 62763 --- [           main] com.poisonedyouth.nota.MainKtTest        : The following 1 profile is active: "test"
2025-09-06T21:18:03.616+02:00  INFO 62763 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-09-06T21:18:03.623+02:00  INFO 62763 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 6 ms. Found 5 JPA repository interfaces.
2025-09-06T21:18:03.663+02:00  INFO 62763 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-09-06T21:18:03.663+02:00  INFO 62763 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-09-06T21:18:03.666+02:00  INFO 62763 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-09-06T21:18:03.667+02:00  INFO 62763 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-09-06T21:18:03.667+02:00  INFO 62763 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:testdb user=SA
2025-09-06T21:18:03.667+02:00  INFO 62763 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-09-06T21:18:03.668+02:00  WARN 62763 --- [           main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-09-06T21:18:03.668+02:00  INFO 62763 --- [           main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
        Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
        Database driver: undefined/unknown
        Database version: 2.3.232
        Autocommit mode: undefined/unknown
        Isolation level: undefined/unknown
        Minimum pool size: undefined/unknown
        Maximum pool size: undefined/unknown
2025-09-06T21:18:03.695+02:00  INFO 62763 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-09-06T21:18:03.703+02:00  INFO 62763 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-09-06T21:18:03.803+02:00  WARN 62763 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-09-06T21:18:03.809+02:00  INFO 62763 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name notaUserDetailsService
2025-09-06T21:18:03.881+02:00  INFO 62763 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint beneath base path '/actuator'
2025-09-06T21:18:03.964+02:00  INFO 62763 --- [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-09-06T21:18:03.977+02:00  INFO 62763 --- [           main] com.poisonedyouth.nota.MainKtTest        : Started MainKtTest in 0.449 seconds (process running for 8.029)
Started contextLoads()
Passed contextLoads()
Passed MainKtTest
Started UserRestControllerSessionFixationTest
Started rest change-password regenerates session id and updates currentUser()
2025-09-06T21:18:04.051+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:04.052+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:04.052+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed rest change-password regenerates session id and updates currentUser()
Started rest login regenerates session id and sets currentUser()
2025-09-06T21:18:04.058+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:04.058+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:04.058+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed rest login regenerates session id and sets currentUser()
Passed UserRestControllerSessionFixationTest
Started EditFunctionalityTest
2025-09-06T21:18:04.117+02:00  INFO 62763 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.poisonedyouth.nota.notes.EditFunctionalityTest]: EditFunctionalityTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-09-06T21:18:04.117+02:00  INFO 62763 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.poisonedyouth.nota.Application for test class com.poisonedyouth.nota.notes.EditFunctionalityTest
Started should update note successfully()
Passed should update note successfully()
Started should update note with null due date()
Passed should update note with null due date()
Started should return null when updating non-existent note()
Passed should return null when updating non-existent note()
Passed EditFunctionalityTest
Started RichTextFunctionalityTest
Started should allow safe HTML tags in note content()
Passed should allow safe HTML tags in note content()
Started should throw exception for empty content()
Passed should throw exception for empty content()
Started should remove iframe and other dangerous tags()
Passed should remove iframe and other dangerous tags()
Started should remove event handlers from HTML()
Passed should remove event handlers from HTML()
Started should sanitize content when updating notes()
Passed should sanitize content when updating notes()
Started should preserve Quill editor formatting()
Passed should preserve Quill editor formatting()
Started should remove dangerous script tags from content()
Passed should remove dangerous script tags from content()
Started should sanitize anchor tags and allow safe URLs()
Passed should sanitize anchor tags and allow safe URLs()
Passed RichTextFunctionalityTest
Started NoteDtoTest
Started isDueSoon should return false when due date is more than 24 hours away()
Passed isDueSoon should return false when due date is more than 24 hours away()
Started isDueSoon should return false when due date is in the past()
Passed isDueSoon should return false when due date is in the past()
Started isDueSoon should return true when due date is within 24 hours()
Passed isDueSoon should return true when due date is within 24 hours()
Started isOverdue should return false when due date is in the future()
Passed isOverdue should return false when due date is in the future()
Started isOverdue should return false when due date is null()
Passed isOverdue should return false when due date is null()
Started isDueSoon should return true when due date is exactly 23 hours away()
Passed isDueSoon should return true when due date is exactly 23 hours away()
Started isDueSoon should return false when due date is exactly 25 hours away()
Passed isDueSoon should return false when due date is exactly 25 hours away()
Started isOverdue should return true when due date is in the past()
Passed isOverdue should return true when due date is in the past()
Started isDueSoon should return false when due date is null()
Passed isDueSoon should return false when due date is null()
Passed NoteDtoTest
Started UserRegistrationE2ETest
2025-09-06T21:18:04.339+02:00  INFO 62763 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.poisonedyouth.nota.user.UserRegistrationE2ETest]: UserRegistrationE2ETest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-09-06T21:18:04.343+02:00  INFO 62763 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.poisonedyouth.nota.Application for test class com.poisonedyouth.nota.user.UserRegistrationE2ETest
Started login should fail with wrong password after registration()
Passed login should fail with wrong password after registration()
Started registration should fail for duplicate username()
Passed registration should fail for duplicate username()
Started complete registration flow should work end-to-end()
Passed complete registration flow should work end-to-end()
Passed UserRegistrationE2ETest
Started NoteIntegrationTest
2025-09-06T21:18:04.781+02:00  INFO 62763 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.poisonedyouth.nota.notes.NoteIntegrationTest]: NoteIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-09-06T21:18:04.781+02:00  INFO 62763 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.poisonedyouth.nota.Application for test class com.poisonedyouth.nota.notes.NoteIntegrationTest
Started should find note by id()
Passed should find note by id()
Started should correctly identify overdue notes()
Passed should correctly identify overdue notes()
Started should include owner information in NoteDto()
Passed should include owner information in NoteDto()
Started should create a new note()
Passed should create a new note()
Started should search notes by title and content()
Passed should search notes by title and content()
Started should return null when note with id does not exist()
Passed should return null when note with id does not exist()
Started should correctly identify notes due soon()
Passed should correctly identify notes due soon()
Started should convert Note entities to NoteDtos with correct methods()
Passed should convert Note entities to NoteDtos with correct methods()
Started should correctly handle notes without due dates()
Passed should correctly handle notes without due dates()
Started should return notes ordered by updatedAt desc()
Passed should return notes ordered by updatedAt desc()
Started should return empty list when no notes exist()
Passed should return empty list when no notes exist()
Started should correctly handle notes with future due dates()
Passed should correctly handle notes with future due dates()
Passed NoteIntegrationTest
Started NoteAttachmentRestControllerTest
Started unauthorized access is rejected()
2025-09-06T21:18:04.886+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:04.886+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:04.886+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed unauthorized access is rejected()
Started upload, list, download and delete attachment()
2025-09-06T21:18:04.891+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:04.891+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:04.891+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed upload, list, download and delete attachment()
Passed NoteAttachmentRestControllerTest
Started NoteServiceTest
Started createNote should create note when content is valid()
Passed createNote should create note when content is valid()
Started findAllNotes should sort by title ascending when specified()
Passed findAllNotes should sort by title ascending when specified()
Started searchNotes should return empty list when query is blank()
Passed searchNotes should return empty list when query is blank()
Started findAllNotes should sort by title descending when specified()
Passed findAllNotes should sort by title descending when specified()
Started findAllNotes should return empty list when no notes exist()
Passed findAllNotes should return empty list when no notes exist()
Started updateNote should update note when content is valid()
Passed updateNote should update note when content is valid()
Started searchNotes should support sorting parameters()
Passed searchNotes should support sorting parameters()
Started createNote should throw exception when content is blank()
Passed createNote should throw exception when content is blank()
Started createNote should throw exception when content is empty()
Passed createNote should throw exception when content is empty()
Started updateNote should throw exception when content is blank()
Passed updateNote should throw exception when content is blank()
Started updateNote should throw exception when content is empty()
Passed updateNote should throw exception when content is empty()
Passed NoteServiceTest
Started UserControllerTest
Started showRegisterForm should return register view()
2025-09-06T21:18:04.980+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:04.980+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:04.980+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed showRegisterForm should return register view()
Started login should authenticate user and redirect to change password when password change required()
2025-09-06T21:18:04.983+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:04.983+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:04.983+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed login should authenticate user and redirect to change password when password change required()
Started login should authenticate user and redirect to notes when password change not required()
2025-09-06T21:18:04.989+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:04.989+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:04.989+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed login should authenticate user and redirect to notes when password change not required()
Started login should return warning for disabled user()
2025-09-06T21:18:04.995+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:04.995+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:04.995+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed login should return warning for disabled user()
Started register should create user and return success view()
2025-09-06T21:18:05.000+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:05.000+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:05.001+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed register should create user and return success view()
Started login should return error for invalid credentials()
2025-09-06T21:18:05.035+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:05.035+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:05.035+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed login should return error for invalid credentials()
Started register should return error when username already exists()
2025-09-06T21:18:05.040+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:05.040+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:05.040+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed register should return error when username already exists()
Started showLoginForm should return login view()
2025-09-06T21:18:05.044+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:05.045+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:05.045+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed showLoginForm should return login view()
Passed UserControllerTest
Started NoteSharingIntegrationTest
2025-09-06T21:18:05.046+02:00  INFO 62763 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.poisonedyouth.nota.notes.NoteSharingIntegrationTest]: NoteSharingIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-09-06T21:18:05.047+02:00  INFO 62763 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.poisonedyouth.nota.Application for test class com.poisonedyouth.nota.notes.NoteSharingIntegrationTest
Started should display notes shared with user()
Passed should display notes shared with user()
Started should display share modal for note owner()
Passed should display share modal for note owner()
Started should redirect when user not authenticated for share modal()
Passed should redirect when user not authenticated for share modal()
Started should show empty state when no shared notes()
Passed should show empty state when no shared notes()
Started should fail when trying to share note already shared with user()
Passed should fail when trying to share note already shared with user()
Started should display both owned and shared notes()
Passed should display both owned and shared notes()
Started should successfully open edit modal for shared note()
Passed should successfully open edit modal for shared note()
Started should successfully revoke share()
Passed should successfully revoke share()
Started should fail when sharing with non-existent user()
Passed should fail when sharing with non-existent user()
Started should redirect when note not found for share modal()
Passed should redirect when note not found for share modal()
Started should successfully share note with valid user()
Passed should successfully share note with valid user()
Started should redirect when note not found for sharing()
Passed should redirect when note not found for sharing()
Passed NoteSharingIntegrationTest
Started FileUploadSafetyValidatorTest
Started rejects missing filename()
Passed rejects missing filename()
Started rejects executable disguised as txt()
2025-09-06T21:18:05.227+02:00  WARN 62763 --- [           main] c.p.n.notes.FileUploadSafetyValidator    : Rejected upload due to content-type mismatch: header='text/plain', magicAllowed=false name='evil.txt' size=4
Passed rejects executable disguised as txt()
Started rejects disallowed extension()
Passed rejects disallowed extension()
Started accepts small text file()
Passed accepts small text file()
Started sanitizes filename to prevent path traversal()
Passed sanitizes filename to prevent path traversal()
Started rejects oversize file()
Passed rejects oversize file()
Started rejects empty file()
Passed rejects empty file()
Passed FileUploadSafetyValidatorTest
Started NoteOverviewContentTest
2025-09-06T21:18:05.232+02:00  INFO 62763 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.poisonedyouth.nota.notes.NoteOverviewContentTest]: NoteOverviewContentTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-09-06T21:18:05.233+02:00  INFO 62763 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.poisonedyouth.nota.Application for test class com.poisonedyouth.nota.notes.NoteOverviewContentTest
Started all notes overview should only show titles after fix()
Passed all notes overview should only show titles after fix()
Started shared notes overview should only show titles after fix()
Passed shared notes overview should only show titles after fix()
Started note overview should only show titles after fix()
2025-09-06T21:18:05.258+02:00  WARN 62763 --- [           main] actStandardFragmentInsertionTagProcessor : [THYMELEAF][main][notes/list] Deprecated unwrapped fragment expression "notes/fragments :: note-card(note=${note})" found in template notes/list, line 72, col 26. Please use the complete syntax of fragment expressions instead ("~{notes/fragments :: note-card(note=${note})}"). The old, unwrapped syntax for fragment expressions will be removed in future versions of Thymeleaf.
2025-09-06T21:18:05.258+02:00  WARN 62763 --- [           main] actStandardFragmentInsertionTagProcessor : [THYMELEAF][main][notes/list] Deprecated unwrapped fragment expression "notes/fragments :: note-card(note=${note})" found in template notes/list, line 72, col 26. Please use the complete syntax of fragment expressions instead ("~{notes/fragments :: note-card(note=${note})}"). The old, unwrapped syntax for fragment expressions will be removed in future versions of Thymeleaf.
Passed note overview should only show titles after fix()
Passed NoteOverviewContentTest
Started ActivityLogE2ETest
2025-09-06T21:18:05.262+02:00  INFO 62763 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.poisonedyouth.nota.activitylog.ActivityLogE2ETest]: ActivityLogE2ETest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-09-06T21:18:05.265+02:00  INFO 62763 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.poisonedyouth.nota.Application for test class com.poisonedyouth.nota.activitylog.ActivityLogE2ETest
Started complete activity log workflow should work end to end()
2025-09-06T21:18:05.266+02:00  INFO 62763 --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:05.266+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:05.267+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
Passed complete activity log workflow should work end to end()
Started activity log should not show pagination for single page()
2025-09-06T21:18:05.485+02:00  INFO 62763 --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:05.485+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:05.486+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms
Passed activity log should not show pagination for single page()
Started activity log should be accessible only to authenticated users()
2025-09-06T21:18:05.557+02:00  INFO 62763 --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:05.557+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:05.557+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed activity log should be accessible only to authenticated users()
Started activity log pagination should work correctly()
2025-09-06T21:18:05.559+02:00  INFO 62763 --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:05.559+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:05.559+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed activity log pagination should work correctly()
Started activity log should show user-specific activities only()
2025-09-06T21:18:05.642+02:00  INFO 62763 --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:05.642+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:05.642+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed activity log should show user-specific activities only()
Passed ActivityLogE2ETest
Started UserServiceTest
Started createUser should reject password shorter than 12 characters()
Passed createUser should reject password shorter than 12 characters()
Started authenticate should return InvalidCredentials for wrong password()
Passed authenticate should return InvalidCredentials for wrong password()
Started changePassword should throw exception when new password is same as current password()
Passed changePassword should throw exception when new password is same as current password()
Started createUser should reject password without digit()
Passed createUser should reject password without digit()
Started createUser should hash password before saving()
Passed createUser should hash password before saving()
Started registerUser should create new user with hashed password and return initial password()
Passed registerUser should create new user with hashed password and return initial password()
Started changePassword should successfully change password and clear mustChangePassword flag()
Passed changePassword should successfully change password and clear mustChangePassword flag()
Started registerUser should generate passwords that always meet complexity requirements()
Passed registerUser should generate passwords that always meet complexity requirements()
Started createUser should reject password without special character()
Passed createUser should reject password without special character()
Started changePassword should throw exception when current password is incorrect()
Passed changePassword should throw exception when current password is incorrect()
Started changePassword should throw exception when new password confirmation does not match()
Passed changePassword should throw exception when new password confirmation does not match()
Started createUser should accept valid complex password()
Passed createUser should accept valid complex password()
Started registerUser should throw exception when username already exists()
Passed registerUser should throw exception when username already exists()
Started authenticate should return UserDisabled for disabled user()
Passed authenticate should return UserDisabled for disabled user()
Started changePassword should reject new password that fails complexity requirements()
Passed changePassword should reject new password that fails complexity requirements()
Started authenticate should work with hashed passwords()
Passed authenticate should work with hashed passwords()
Started authenticate should return InvalidCredentials for non-existent user()
Passed authenticate should return InvalidCredentials for non-existent user()
Started createUser should reject password without lowercase letter()
Passed createUser should reject password without lowercase letter()
Started createUser should reject password without uppercase letter()
Passed createUser should reject password without uppercase letter()
Started changePassword should throw exception when user not found()
Passed changePassword should throw exception when user not found()
Passed UserServiceTest
Started NoteAttachmentRepositoryTest
2025-09-06T21:18:07.757+02:00  INFO 62763 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.poisonedyouth.nota.notes.NoteAttachmentRepositoryTest]: NoteAttachmentRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-09-06T21:18:07.761+02:00  INFO 62763 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.poisonedyouth.nota.Application for test class com.poisonedyouth.nota.notes.NoteAttachmentRepositoryTest
2025-09-06T21:18:07.762+02:00  INFO 62763 --- [           main] o.s.b.d.r.RestartApplicationListener     : Restart disabled due to context in which it is running
  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v3.4.3)
2025-09-06T21:18:07.768+02:00  INFO 62763 --- [           main] c.p.n.n.NoteAttachmentRepositoryTest     : Starting NoteAttachmentRepositoryTest using Java 21.0.1 with PID 62763 (started by poisonedyouth in /Users/poisonedyouth/IdeaProjects/private/nota)
2025-09-06T21:18:07.768+02:00  INFO 62763 --- [           main] c.p.n.n.NoteAttachmentRepositoryTest     : The following 1 profile is active: "test"
2025-09-06T21:18:07.793+02:00  INFO 62763 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-09-06T21:18:07.799+02:00  INFO 62763 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 5 ms. Found 5 JPA repository interfaces.
2025-09-06T21:18:07.803+02:00  INFO 62763 --- [           main] beddedDataSourceBeanFactoryPostProcessor : Replacing 'dataSource' DataSource bean with embedded version
2025-09-06T21:18:07.813+02:00  INFO 62763 --- [           main] o.s.j.d.e.EmbeddedDatabaseFactory        : Starting embedded database: url='jdbc:h2:mem:26d950eb-e686-4ef3-803e-a95eff12f013;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false', username='sa'
2025-09-06T21:18:07.819+02:00  INFO 62763 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-09-06T21:18:07.819+02:00  INFO 62763 --- [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-09-06T21:18:07.822+02:00  INFO 62763 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-09-06T21:18:07.823+02:00  WARN 62763 --- [           main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-09-06T21:18:07.823+02:00  INFO 62763 --- [           main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
        Database JDBC URL [Connecting through datasource 'org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseFactory$EmbeddedDataSourceProxy@6372ffe']
        Database driver: undefined/unknown
        Database version: 2.3.232
        Autocommit mode: undefined/unknown
        Isolation level: undefined/unknown
        Minimum pool size: undefined/unknown
        Maximum pool size: undefined/unknown
2025-09-06T21:18:07.847+02:00  INFO 62763 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
Hibernate: drop table if exists activity_log cascade
Hibernate: drop table if exists note_attachments cascade
Hibernate: drop table if exists note_shares cascade
Hibernate: drop table if exists notes cascade
Hibernate: drop table if exists users cascade
Hibernate: create table activity_log (created_at timestamp(6) not null, entity_id bigint, id bigint generated by default as identity, user_id bigint not null, action varchar(50) not null, entity_type varchar(50) not null, description TEXT not null, primary key (id))
Hibernate: create table note_attachments (created_at timestamp(6) not null, file_size bigint not null, id bigint generated by default as identity, note_id bigint not null, version bigint not null, content_type varchar(255), filename varchar(255) not null, data blob not null, primary key (id))
Hibernate: create table note_shares (created_at timestamp(6) not null, id bigint generated by default as identity, note_id bigint not null, shared_by_user_id bigint not null, shared_with_user_id bigint not null, permission varchar(255) not null, primary key (id))
Hibernate: create table notes (archived boolean not null, archived_at timestamp(6), created_at timestamp(6) not null, due_date timestamp(6), id bigint generated by default as identity, updated_at timestamp(6) not null, user_id bigint not null, version bigint not null, content TEXT, title varchar(255) not null, primary key (id))
Hibernate: create table users (enabled boolean not null, must_change_password boolean not null, created_at timestamp(6) not null, id bigint generated by default as identity, updated_at timestamp(6) not null, version bigint not null, password varchar(255) not null, username varchar(255) not null unique, role enum ('ADMIN','USER') not null, primary key (id))
Hibernate: alter table if exists note_attachments add constraint FK7pd5uka0yrlw1p387srl3uhu5 foreign key (note_id) references notes
Hibernate: alter table if exists note_shares add constraint FKehh6c24at6fnu8dvh73cr6uql foreign key (note_id) references notes
Hibernate: alter table if exists note_shares add constraint FK71wbgl5ls4elnn5tn3w9dsft1 foreign key (shared_by_user_id) references users
Hibernate: alter table if exists note_shares add constraint FK5krm4s1buwag09rx3d9h3pvdm foreign key (shared_with_user_id) references users
Hibernate: alter table if exists notes add constraint FKechaouoa6kus6k1dpix1u91c foreign key (user_id) references users
2025-09-06T21:18:07.851+02:00  INFO 62763 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-09-06T21:18:07.894+02:00  INFO 62763 --- [           main] c.p.n.n.NoteAttachmentRepositoryTest     : Started NoteAttachmentRepositoryTest in 0.132 seconds (process running for 11.946)
Started should save and load attachments for note()
Hibernate: select na1_0.id,na1_0.content_type,na1_0.created_at,na1_0.data,na1_0.file_size,na1_0.filename,na1_0.note_id,na1_0.version from note_attachments na1_0
Hibernate: select n1_0.id,n1_0.archived,n1_0.archived_at,n1_0.content,n1_0.created_at,n1_0.due_date,n1_0.title,n1_0.updated_at,n1_0.user_id,n1_0.version from notes n1_0
Hibernate: select u1_0.id,u1_0.created_at,u1_0.enabled,u1_0.must_change_password,u1_0.password,u1_0.role,u1_0.updated_at,u1_0.username,u1_0.version from users u1_0
Hibernate: insert into users (created_at,enabled,must_change_password,password,role,updated_at,username,version,id) values (?,?,?,?,?,?,?,?,default)
Hibernate: insert into notes (archived,archived_at,content,created_at,due_date,title,updated_at,user_id,version,id) values (?,?,?,?,?,?,?,?,?,default)
Hibernate: insert into note_attachments (content_type,created_at,data,file_size,filename,note_id,version,id) values (?,?,?,?,?,?,?,default)
Hibernate: insert into note_attachments (content_type,created_at,data,file_size,filename,note_id,version,id) values (?,?,?,?,?,?,?,default)
Hibernate: select na1_0.id,na1_0.content_type,na1_0.created_at,na1_0.data,na1_0.file_size,na1_0.filename,na1_0.note_id,na1_0.version from note_attachments na1_0 left join notes n1_0 on n1_0.id=na1_0.note_id where n1_0.id=? order by na1_0.created_at desc
Hibernate: select na1_0.id,na1_0.content_type,na1_0.created_at,na1_0.data,na1_0.file_size,na1_0.filename,na1_0.note_id,na1_0.version from note_attachments na1_0 left join notes n1_0 on n1_0.id=na1_0.note_id where na1_0.id=? and n1_0.id=?
Passed should save and load attachments for note()
Passed NoteAttachmentRepositoryTest
Started NoteSanitizationAndAccessTest
2025-09-06T21:18:07.912+02:00  INFO 62763 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.poisonedyouth.nota.notes.NoteSanitizationAndAccessTest]: NoteSanitizationAndAccessTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-09-06T21:18:07.913+02:00  INFO 62763 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.poisonedyouth.nota.Application for test class com.poisonedyouth.nota.notes.NoteSanitizationAndAccessTest
Started per-user access control - user cannot access other's note()
Passed per-user access control - user cannot access other's note()
Started findAllNotes excludes archived and findAllArchivedNotes returns only archived()
Passed findAllNotes excludes archived and findAllArchivedNotes returns only archived()
Started createNote should sanitize dangerous HTML content()
Passed createNote should sanitize dangerous HTML content()
Started updateNote should sanitize dangerous HTML content()
Passed updateNote should sanitize dangerous HTML content()
Passed NoteSanitizationAndAccessTest
Started RootControllerTest
Started should redirect to notes when user is logged in()
2025-09-06T21:18:07.938+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:07.938+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:07.938+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed should redirect to notes when user is logged in()
Started should redirect to login when no user in session()
2025-09-06T21:18:07.941+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:07.941+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:07.941+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed should redirect to login when no user in session()
Started should work with admin user()
2025-09-06T21:18:07.942+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:07.942+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:07.942+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed should work with admin user()
Started should redirect to login when session is null()
2025-09-06T21:18:07.944+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:07.944+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:07.944+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed should redirect to login when session is null()
Started should redirect to login when currentUser attribute is null()
2025-09-06T21:18:07.946+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:07.946+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:07.946+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed should redirect to login when currentUser attribute is null()
Started should redirect to login when currentUser is invalid type()
2025-09-06T21:18:07.947+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:07.947+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:07.947+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed should redirect to login when currentUser is invalid type()
Passed RootControllerTest
Started NoteRepositoryTest
2025-09-06T21:18:07.949+02:00  INFO 62763 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.poisonedyouth.nota.notes.NoteRepositoryTest]: NoteRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-09-06T21:18:07.950+02:00  INFO 62763 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.poisonedyouth.nota.Application for test class com.poisonedyouth.nota.notes.NoteRepositoryTest
Started findByIdAndAccessibleByUser should find shared notes()
Hibernate: select ns1_0.id,ns1_0.created_at,ns1_0.note_id,ns1_0.permission,ns1_0.shared_by_user_id,ns1_0.shared_with_user_id from note_shares ns1_0
Hibernate: select n1_0.id,n1_0.archived,n1_0.archived_at,n1_0.content,n1_0.created_at,n1_0.due_date,n1_0.title,n1_0.updated_at,n1_0.user_id,n1_0.version from notes n1_0
Hibernate: select u1_0.id,u1_0.created_at,u1_0.enabled,u1_0.must_change_password,u1_0.password,u1_0.role,u1_0.updated_at,u1_0.username,u1_0.version from users u1_0
Hibernate: insert into users (created_at,enabled,must_change_password,password,role,updated_at,username,version,id) values (?,?,?,?,?,?,?,?,default)
Hibernate: insert into users (created_at,enabled,must_change_password,password,role,updated_at,username,version,id) values (?,?,?,?,?,?,?,?,default)
Hibernate: insert into notes (archived,archived_at,content,created_at,due_date,title,updated_at,user_id,version,id) values (?,?,?,?,?,?,?,?,?,default)
Hibernate: insert into notes (archived,archived_at,content,created_at,due_date,title,updated_at,user_id,version,id) values (?,?,?,?,?,?,?,?,?,default)
Hibernate: insert into notes (archived,archived_at,content,created_at,due_date,title,updated_at,user_id,version,id) values (?,?,?,?,?,?,?,?,?,default)
Hibernate: insert into notes (archived,archived_at,content,created_at,due_date,title,updated_at,user_id,version,id) values (?,?,?,?,?,?,?,?,?,default)
Hibernate: insert into note_shares (created_at,note_id,permission,shared_by_user_id,shared_with_user_id,id) values (?,?,?,?,?,default)
Hibernate: select n1_0.id,n1_0.archived,n1_0.archived_at,n1_0.content,n1_0.created_at,n1_0.due_date,n1_0.title,n1_0.updated_at,n1_0.user_id,n1_0.version from notes n1_0 left join note_shares ns1_0 on n1_0.id=ns1_0.note_id where (n1_0.user_id=? or ns1_0.shared_with_user_id=?) and n1_0.id=?
Hibernate: select n1_0.id,n1_0.archived,n1_0.archived_at,n1_0.content,n1_0.created_at,n1_0.due_date,n1_0.title,n1_0.updated_at,n1_0.user_id,n1_0.version from notes n1_0 left join note_shares ns1_0 on n1_0.id=ns1_0.note_id where (n1_0.user_id=? or ns1_0.shared_with_user_id=?) and n1_0.id=?
Hibernate: select n1_0.id,n1_0.archived,n1_0.archived_at,n1_0.content,n1_0.created_at,n1_0.due_date,n1_0.title,n1_0.updated_at,n1_0.user_id,n1_0.version from notes n1_0 left join note_shares ns1_0 on n1_0.id=ns1_0.note_id where (n1_0.user_id=? or ns1_0.shared_with_user_id=?) and n1_0.id=?
Passed findByIdAndAccessibleByUser should find shared notes()
Started findAllByUserAndArchivedFalse with sort should respect sorting()
Hibernate: select ns1_0.id,ns1_0.created_at,ns1_0.note_id,ns1_0.permission,ns1_0.shared_by_user_id,ns1_0.shared_with_user_id from note_shares ns1_0
Hibernate: select n1_0.id,n1_0.archived,n1_0.archived_at,n1_0.content,n1_0.created_at,n1_0.due_date,n1_0.title,n1_0.updated_at,n1_0.user_id,n1_0.version from notes n1_0
Hibernate: select u1_0.id,u1_0.created_at,u1_0.enabled,u1_0.must_change_password,u1_0.password,u1_0.role,u1_0.updated_at,u1_0.username,u1_0.version from users u1_0
Hibernate: insert into users (created_at,enabled,must_change_password,password,role,updated_at,username,version,id) values (?,?,?,?,?,?,?,?,default)
Hibernate: insert into users (created_at,enabled,must_change_password,password,role,updated_at,username,version,id) values (?,?,?,?,?,?,?,?,default)
Hibernate: insert into notes (archived,archived_at,content,created_at,due_date,title,updated_at,user_id,version,id) values (?,?,?,?,?,?,?,?,?,default)
Hibernate: insert into notes (archived,archived_at,content,created_at,due_date,title,updated_at,user_id,version,id) values (?,?,?,?,?,?,?,?,?,default)
Hibernate: insert into notes (archived,archived_at,content,created_at,due_date,title,updated_at,user_id,version,id) values (?,?,?,?,?,?,?,?,?,default)
Hibernate: select n1_0.id,n1_0.archived,n1_0.archived_at,n1_0.content,n1_0.created_at,n1_0.due_date,n1_0.title,n1_0.updated_at,n1_0.user_id,n1_0.version from notes n1_0 where n1_0.user_id=? and not(n1_0.archived) order by n1_0.title
Passed findAllByUserAndArchivedFalse with sort should respect sorting()
Started repository should handle empty results gracefully()
Hibernate: select ns1_0.id,ns1_0.created_at,ns1_0.note_id,ns1_0.permission,ns1_0.shared_by_user_id,ns1_0.shared_with_user_id from note_shares ns1_0
Hibernate: select n1_0.id,n1_0.archived,n1_0.archived_at,n1_0.content,n1_0.created_at,n1_0.due_date,n1_0.title,n1_0.updated_at,n1_0.user_id,n1_0.version from notes n1_0
Hibernate: select u1_0.id,u1_0.created_at,u1_0.enabled,u1_0.must_change_password,u1_0.password,u1_0.role,u1_0.updated_at,u1_0.username,u1_0.version from users u1_0
Hibernate: insert into users (created_at,enabled,must_change_password,password,role,updated_at,username,version,id) values (?,?,?,?,?,?,?,?,default)
Hibernate: insert into users (created_at,enabled,must_change_password,password,role,updated_at,username,version,id) values (?,?,?,?,?,?,?,?,default)
Hibernate: insert into notes (archived,archived_at,content,created_at,due_date,title,updated_at,user_id,version,id) values (?,?,?,?,?,?,?,?,?,default)
Hibernate: insert into notes (archived,archived_at,content,created_at,due_date,title,updated_at,user_id,version,id) values (?,?,?,?,?,?,?,?,?,default)
Hibernate: insert into notes (archived,archived_at,content,created_at,due_date,title,updated_at,user_id,version,id) values (?,?,?,?,?,?,?,?,?,default)
Hibernate: select n1_0.id,n1_0.archived,n1_0.archived_at,n1_0.content,n1_0.created_at,n1_0.due_date,n1_0.title,n1_0.updated_at,n1_0.user_id,n1_0.version from notes n1_0 where n1_0.user_id=? and not(n1_0.archived) order by n1_0.updated_at desc
Hibernate: select n1_0.id,n1_0.archived,n1_0.archived_at,n1_0.content,n1_0.created_at,n1_0.due_date,n1_0.title,n1_0.updated_at,n1_0.user_id,n1_0.version from notes n1_0 where n1_0.user_id=? and n1_0.archived=false and (lower(n1_0.title) like lower(('%'||?||'%')) escape '' or lower(n1_0.content) like lower(('%'||?||'%')) escape '') order by n1_0.updated_at desc
Passed repository should handle empty results gracefully()
Started count methods should return correct statistics()
Hibernate: select ns1_0.id,ns1_0.created_at,ns1_0.note_id,ns1_0.permission,ns1_0.shared_by_user_id,ns1_0.shared_with_user_id from note_shares ns1_0
Hibernate: select n1_0.id,n1_0.archived,n1_0.archived_at,n1_0.content,n1_0.created_at,n1_0.due_date,n1_0.title,n1_0.updated_at,n1_0.user_id,n1_0.version from notes n1_0
Hibernate: select u1_0.id,u1_0.created_at,u1_0.enabled,u1_0.must_change_password,u1_0.password,u1_0.role,u1_0.updated_at,u1_0.username,u1_0.version from users u1_0
Hibernate: insert into users (created_at,enabled,must_change_password,password,role,updated_at,username,version,id) values (?,?,?,?,?,?,?,?,default)
Hibernate: insert into users (created_at,enabled,must_change_password,password,role,updated_at,username,version,id) values (?,?,?,?,?,?,?,?,default)
Hibernate: insert into notes (archived,archived_at,content,created_at,due_date,title,updated_at,user_id,version,id) values (?,?,?,?,?,?,?,?,?,default)
Hibernate: insert into notes (archived,archived_at,content,created_at,due_date,title,updated_at,user_id,version,id) values (?,?,?,?,?,?,?,?,?,default)
Hibernate: insert into notes (archived,archived_at,content,created_at,due_date,title,updated_at,user_id,version,id) values (?,?,?,?,?,?,?,?,?,default)
Hibernate: select count(n1_0.id) from notes n1_0 where n1_0.user_id=?
Hibernate: select count(n1_0.id) from notes n1_0 where n1_0.user_id=? and n1_0.archived
Hibernate: select count(n1_0.id) from notes n1_0 where n1_0.archived
Passed count methods should return correct statistics()
Started findAllAccessibleByUserAndArchivedFalse should include shared notes()
Hibernate: select ns1_0.id,ns1_0.created_at,ns1_0.note_id,ns1_0.permission,ns1_0.shared_by_user_id,ns1_0.shared_with_user_id from note_shares ns1_0
Hibernate: select n1_0.id,n1_0.archived,n1_0.archived_at,n1_0.content,n1_0.created_at,n1_0.due_date,n1_0.title,n1_0.updated_at,n1_0.user_id,n1_0.version from notes n1_0
Hibernate: select u1_0.id,u1_0.created_at,u1_0.enabled,u1_0.must_change_password,u1_0.password,u1_0.role,u1_0.updated_at,u1_0.username,u1_0.version from users u1_0
Hibernate: insert into users (created_at,enabled,must_change_password,password,role,updated_at,username,version,id) values (?,?,?,?,?,?,?,?,default)
Hibernate: insert into users (created_at,enabled,must_change_password,password,role,updated_at,username,version,id) values (?,?,?,?,?,?,?,?,default)
Hibernate: insert into notes (archived,archived_at,content,created_at,due_date,title,updated_at,user_id,version,id) values (?,?,?,?,?,?,?,?,?,default)
Hibernate: insert into notes (archived,archived_at,content,created_at,due_date,title,updated_at,user_id,version,id) values (?,?,?,?,?,?,?,?,?,default)
Hibernate: insert into notes (archived,archived_at,content,created_at,due_date,title,updated_at,user_id,version,id) values (?,?,?,?,?,?,?,?,?,default)
Hibernate: insert into notes (archived,archived_at,content,created_at,due_date,title,updated_at,user_id,version,id) values (?,?,?,?,?,?,?,?,?,default)
Hibernate: insert into note_shares (created_at,note_id,permission,shared_by_user_id,shared_with_user_id,id) values (?,?,?,?,?,default)
Hibernate: select distinct n1_0.id,n1_0.archived,n1_0.archived_at,n1_0.content,n1_0.created_at,n1_0.due_date,n1_0.title,n1_0.updated_at,n1_0.user_id,n1_0.version from notes n1_0 left join note_shares ns1_0 on n1_0.id=ns1_0.note_id where (n1_0.user_id=? or ns1_0.shared_with_user_id=?) and n1_0.archived=false order by n1_0.updated_at desc
Passed findAllAccessibleByUserAndArchivedFalse should include shared notes()
Started search methods should find notes by title and content()
Hibernate: select ns1_0.id,ns1_0.created_at,ns1_0.note_id,ns1_0.permission,ns1_0.shared_by_user_id,ns1_0.shared_with_user_id from note_shares ns1_0
Hibernate: select n1_0.id,n1_0.archived,n1_0.archived_at,n1_0.content,n1_0.created_at,n1_0.due_date,n1_0.title,n1_0.updated_at,n1_0.user_id,n1_0.version from notes n1_0
Hibernate: select u1_0.id,u1_0.created_at,u1_0.enabled,u1_0.must_change_password,u1_0.password,u1_0.role,u1_0.updated_at,u1_0.username,u1_0.version from users u1_0
Hibernate: insert into users (created_at,enabled,must_change_password,password,role,updated_at,username,version,id) values (?,?,?,?,?,?,?,?,default)
Hibernate: insert into users (created_at,enabled,must_change_password,password,role,updated_at,username,version,id) values (?,?,?,?,?,?,?,?,default)
Hibernate: insert into notes (archived,archived_at,content,created_at,due_date,title,updated_at,user_id,version,id) values (?,?,?,?,?,?,?,?,?,default)
Hibernate: insert into notes (archived,archived_at,content,created_at,due_date,title,updated_at,user_id,version,id) values (?,?,?,?,?,?,?,?,?,default)
Hibernate: insert into notes (archived,archived_at,content,created_at,due_date,title,updated_at,user_id,version,id) values (?,?,?,?,?,?,?,?,?,default)
Hibernate: select n1_0.id,n1_0.archived,n1_0.archived_at,n1_0.content,n1_0.created_at,n1_0.due_date,n1_0.title,n1_0.updated_at,n1_0.user_id,n1_0.version from notes n1_0 where n1_0.user_id=? and not(n1_0.archived) and upper(n1_0.title) like upper(?) escape '\' or upper(n1_0.content) like upper(?) escape '\' order by n1_0.updated_at desc
Hibernate: select n1_0.id,n1_0.archived,n1_0.archived_at,n1_0.content,n1_0.created_at,n1_0.due_date,n1_0.title,n1_0.updated_at,n1_0.user_id,n1_0.version from notes n1_0 where n1_0.user_id=? and not(n1_0.archived) and upper(n1_0.title) like upper(?) escape '\' or upper(n1_0.content) like upper(?) escape '\' order by n1_0.updated_at desc
Passed search methods should find notes by title and content()
Started findAllByUserAndArchivedFalseOrderByUpdatedAtDesc should return non-archived notes in desc order()
Hibernate: select ns1_0.id,ns1_0.created_at,ns1_0.note_id,ns1_0.permission,ns1_0.shared_by_user_id,ns1_0.shared_with_user_id from note_shares ns1_0
Hibernate: select n1_0.id,n1_0.archived,n1_0.archived_at,n1_0.content,n1_0.created_at,n1_0.due_date,n1_0.title,n1_0.updated_at,n1_0.user_id,n1_0.version from notes n1_0
Hibernate: select u1_0.id,u1_0.created_at,u1_0.enabled,u1_0.must_change_password,u1_0.password,u1_0.role,u1_0.updated_at,u1_0.username,u1_0.version from users u1_0
Hibernate: insert into users (created_at,enabled,must_change_password,password,role,updated_at,username,version,id) values (?,?,?,?,?,?,?,?,default)
Hibernate: insert into users (created_at,enabled,must_change_password,password,role,updated_at,username,version,id) values (?,?,?,?,?,?,?,?,default)
Hibernate: insert into notes (archived,archived_at,content,created_at,due_date,title,updated_at,user_id,version,id) values (?,?,?,?,?,?,?,?,?,default)
Hibernate: insert into notes (archived,archived_at,content,created_at,due_date,title,updated_at,user_id,version,id) values (?,?,?,?,?,?,?,?,?,default)
Hibernate: insert into notes (archived,archived_at,content,created_at,due_date,title,updated_at,user_id,version,id) values (?,?,?,?,?,?,?,?,?,default)
Hibernate: select n1_0.id,n1_0.archived,n1_0.archived_at,n1_0.content,n1_0.created_at,n1_0.due_date,n1_0.title,n1_0.updated_at,n1_0.user_id,n1_0.version from notes n1_0 where n1_0.user_id=? and not(n1_0.archived) order by n1_0.updated_at desc
Passed findAllByUserAndArchivedFalseOrderByUpdatedAtDesc should return non-archived notes in desc order()
Started findAllAccessibleByUserAndArchivedFalseAndQuery should search in shared notes()
Hibernate: select ns1_0.id,ns1_0.created_at,ns1_0.note_id,ns1_0.permission,ns1_0.shared_by_user_id,ns1_0.shared_with_user_id from note_shares ns1_0
Hibernate: select n1_0.id,n1_0.archived,n1_0.archived_at,n1_0.content,n1_0.created_at,n1_0.due_date,n1_0.title,n1_0.updated_at,n1_0.user_id,n1_0.version from notes n1_0
Hibernate: select u1_0.id,u1_0.created_at,u1_0.enabled,u1_0.must_change_password,u1_0.password,u1_0.role,u1_0.updated_at,u1_0.username,u1_0.version from users u1_0
Hibernate: insert into users (created_at,enabled,must_change_password,password,role,updated_at,username,version,id) values (?,?,?,?,?,?,?,?,default)
Hibernate: insert into users (created_at,enabled,must_change_password,password,role,updated_at,username,version,id) values (?,?,?,?,?,?,?,?,default)
Hibernate: insert into notes (archived,archived_at,content,created_at,due_date,title,updated_at,user_id,version,id) values (?,?,?,?,?,?,?,?,?,default)
Hibernate: insert into notes (archived,archived_at,content,created_at,due_date,title,updated_at,user_id,version,id) values (?,?,?,?,?,?,?,?,?,default)
Hibernate: insert into notes (archived,archived_at,content,created_at,due_date,title,updated_at,user_id,version,id) values (?,?,?,?,?,?,?,?,?,default)
Hibernate: insert into notes (archived,archived_at,content,created_at,due_date,title,updated_at,user_id,version,id) values (?,?,?,?,?,?,?,?,?,default)
Hibernate: insert into note_shares (created_at,note_id,permission,shared_by_user_id,shared_with_user_id,id) values (?,?,?,?,?,default)
Hibernate: select distinct n1_0.id,n1_0.archived,n1_0.archived_at,n1_0.content,n1_0.created_at,n1_0.due_date,n1_0.title,n1_0.updated_at,n1_0.user_id,n1_0.version from notes n1_0 left join note_shares ns1_0 on n1_0.id=ns1_0.note_id where (n1_0.user_id=? or ns1_0.shared_with_user_id=?) and n1_0.archived=false and (lower(n1_0.title) like lower(('%'||?||'%')) escape '' or lower(n1_0.content) like lower(('%'||?||'%')) escape '') order by n1_0.updated_at desc
Passed findAllAccessibleByUserAndArchivedFalseAndQuery should search in shared notes()
Started findAllByUserAndArchivedFalseAndQuery with custom query should work()
Hibernate: select ns1_0.id,ns1_0.created_at,ns1_0.note_id,ns1_0.permission,ns1_0.shared_by_user_id,ns1_0.shared_with_user_id from note_shares ns1_0
Hibernate: select n1_0.id,n1_0.archived,n1_0.archived_at,n1_0.content,n1_0.created_at,n1_0.due_date,n1_0.title,n1_0.updated_at,n1_0.user_id,n1_0.version from notes n1_0
Hibernate: select u1_0.id,u1_0.created_at,u1_0.enabled,u1_0.must_change_password,u1_0.password,u1_0.role,u1_0.updated_at,u1_0.username,u1_0.version from users u1_0
Hibernate: insert into users (created_at,enabled,must_change_password,password,role,updated_at,username,version,id) values (?,?,?,?,?,?,?,?,default)
Hibernate: insert into users (created_at,enabled,must_change_password,password,role,updated_at,username,version,id) values (?,?,?,?,?,?,?,?,default)
Hibernate: insert into notes (archived,archived_at,content,created_at,due_date,title,updated_at,user_id,version,id) values (?,?,?,?,?,?,?,?,?,default)
Hibernate: insert into notes (archived,archived_at,content,created_at,due_date,title,updated_at,user_id,version,id) values (?,?,?,?,?,?,?,?,?,default)
Hibernate: insert into notes (archived,archived_at,content,created_at,due_date,title,updated_at,user_id,version,id) values (?,?,?,?,?,?,?,?,?,default)
Hibernate: select n1_0.id,n1_0.archived,n1_0.archived_at,n1_0.content,n1_0.created_at,n1_0.due_date,n1_0.title,n1_0.updated_at,n1_0.user_id,n1_0.version from notes n1_0 where n1_0.user_id=? and n1_0.archived=false and (lower(n1_0.title) like lower(('%'||?||'%')) escape '' or lower(n1_0.content) like lower(('%'||?||'%')) escape '') order by n1_0.updated_at desc
Passed findAllByUserAndArchivedFalseAndQuery with custom query should work()
Started findByIdAndUser should return note only if belongs to user()
Hibernate: select ns1_0.id,ns1_0.created_at,ns1_0.note_id,ns1_0.permission,ns1_0.shared_by_user_id,ns1_0.shared_with_user_id from note_shares ns1_0
Hibernate: select n1_0.id,n1_0.archived,n1_0.archived_at,n1_0.content,n1_0.created_at,n1_0.due_date,n1_0.title,n1_0.updated_at,n1_0.user_id,n1_0.version from notes n1_0
Hibernate: select u1_0.id,u1_0.created_at,u1_0.enabled,u1_0.must_change_password,u1_0.password,u1_0.role,u1_0.updated_at,u1_0.username,u1_0.version from users u1_0
Hibernate: insert into users (created_at,enabled,must_change_password,password,role,updated_at,username,version,id) values (?,?,?,?,?,?,?,?,default)
Hibernate: insert into users (created_at,enabled,must_change_password,password,role,updated_at,username,version,id) values (?,?,?,?,?,?,?,?,default)
Hibernate: insert into notes (archived,archived_at,content,created_at,due_date,title,updated_at,user_id,version,id) values (?,?,?,?,?,?,?,?,?,default)
Hibernate: insert into notes (archived,archived_at,content,created_at,due_date,title,updated_at,user_id,version,id) values (?,?,?,?,?,?,?,?,?,default)
Hibernate: insert into notes (archived,archived_at,content,created_at,due_date,title,updated_at,user_id,version,id) values (?,?,?,?,?,?,?,?,?,default)
Hibernate: select n1_0.id,n1_0.archived,n1_0.archived_at,n1_0.content,n1_0.created_at,n1_0.due_date,n1_0.title,n1_0.updated_at,n1_0.user_id,n1_0.version from notes n1_0 where n1_0.id=? and n1_0.user_id=?
Hibernate: select n1_0.id,n1_0.archived,n1_0.archived_at,n1_0.content,n1_0.created_at,n1_0.due_date,n1_0.title,n1_0.updated_at,n1_0.user_id,n1_0.version from notes n1_0 where n1_0.id=? and n1_0.user_id=?
Passed findByIdAndUser should return note only if belongs to user()
Started findAllByUserAndArchivedTrueOrderByUpdatedAtDesc should return only archived notes()
Hibernate: select ns1_0.id,ns1_0.created_at,ns1_0.note_id,ns1_0.permission,ns1_0.shared_by_user_id,ns1_0.shared_with_user_id from note_shares ns1_0
Hibernate: select n1_0.id,n1_0.archived,n1_0.archived_at,n1_0.content,n1_0.created_at,n1_0.due_date,n1_0.title,n1_0.updated_at,n1_0.user_id,n1_0.version from notes n1_0
Hibernate: select u1_0.id,u1_0.created_at,u1_0.enabled,u1_0.must_change_password,u1_0.password,u1_0.role,u1_0.updated_at,u1_0.username,u1_0.version from users u1_0
Hibernate: insert into users (created_at,enabled,must_change_password,password,role,updated_at,username,version,id) values (?,?,?,?,?,?,?,?,default)
Hibernate: insert into users (created_at,enabled,must_change_password,password,role,updated_at,username,version,id) values (?,?,?,?,?,?,?,?,default)
Hibernate: insert into notes (archived,archived_at,content,created_at,due_date,title,updated_at,user_id,version,id) values (?,?,?,?,?,?,?,?,?,default)
Hibernate: insert into notes (archived,archived_at,content,created_at,due_date,title,updated_at,user_id,version,id) values (?,?,?,?,?,?,?,?,?,default)
Hibernate: insert into notes (archived,archived_at,content,created_at,due_date,title,updated_at,user_id,version,id) values (?,?,?,?,?,?,?,?,?,default)
Hibernate: select n1_0.id,n1_0.archived,n1_0.archived_at,n1_0.content,n1_0.created_at,n1_0.due_date,n1_0.title,n1_0.updated_at,n1_0.user_id,n1_0.version from notes n1_0 where n1_0.user_id=? and n1_0.archived order by n1_0.updated_at desc
Passed findAllByUserAndArchivedTrueOrderByUpdatedAtDesc should return only archived notes()
Passed NoteRepositoryTest
Started ActivityEventPublisherTest
Started publishUserDisabledEvent should publish UserDisabledEvent()
Passed publishUserDisabledEvent should publish UserDisabledEvent()
Started publishDeleteAttachmentEvent should publish DeleteAttachmentEvent()
Passed publishDeleteAttachmentEvent should publish DeleteAttachmentEvent()
Started publishUserEnabledEvent should publish UserEnabledEvent()
Passed publishUserEnabledEvent should publish UserEnabledEvent()
Started publishLoginEvent should publish LoginEvent()
Passed publishLoginEvent should publish LoginEvent()
Started should handle multiple events published in sequence()
Passed should handle multiple events published in sequence()
Started publishUpdateNoteEvent should publish UpdateNoteEvent()
Passed publishUpdateNoteEvent should publish UpdateNoteEvent()
Started publishRevokeShareNoteEvent should publish RevokeShareNoteEvent()
Passed publishRevokeShareNoteEvent should publish RevokeShareNoteEvent()
Started publishArchiveNoteEvent should publish ArchiveNoteEvent()
Passed publishArchiveNoteEvent should publish ArchiveNoteEvent()
Started publishUploadAttachmentEvent should publish UploadAttachmentEvent()
Passed publishUploadAttachmentEvent should publish UploadAttachmentEvent()
Started publishCreateNoteEvent should publish CreateNoteEvent()
Passed publishCreateNoteEvent should publish CreateNoteEvent()
Started publishShareNoteEvent should publish ShareNoteEvent()
Passed publishShareNoteEvent should publish ShareNoteEvent()
Started publishDownloadAttachmentEvent should publish DownloadAttachmentEvent()
Passed publishDownloadAttachmentEvent should publish DownloadAttachmentEvent()
Passed ActivityEventPublisherTest
Started DtoValidationTest
Started UpdateNoteDto validates id positive and title()
Passed UpdateNoteDto validates id positive and title()
Started CreateNoteDto requires non-blank title and limits length()
Passed CreateNoteDto requires non-blank title and limits length()
Started ShareNoteDto validates username and permission()
Passed ShareNoteDto validates username and permission()
Started RegisterDto requires username min length()
Passed RegisterDto requires username min length()
Started LoginDto requires username and password length()
Passed LoginDto requires username and password length()
Passed DtoValidationTest
Started AdminRestControllerTest
Started should forbid non-admin for stats()
2025-09-06T21:18:08.171+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:08.171+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:08.171+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed should forbid non-admin for stats()
Started should return system stats for admin()
2025-09-06T21:18:08.176+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:08.176+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:08.176+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed should return system stats for admin()
Started should enable and disable user()
2025-09-06T21:18:08.213+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:08.213+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:08.213+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed should enable and disable user()
Passed AdminRestControllerTest
Started UserControllerSessionFixationTest
Started login regenerates session id and sets currentUser()
2025-09-06T21:18:08.218+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:08.218+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:08.218+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed login regenerates session id and sets currentUser()
Started change-password regenerates session id and updates currentUser()
2025-09-06T21:18:08.223+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:08.223+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:08.223+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed change-password regenerates session id and updates currentUser()
Passed UserControllerSessionFixationTest
Started AdminE2ETest
2025-09-06T21:18:08.226+02:00  INFO 62763 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.poisonedyouth.nota.admin.AdminE2ETest]: AdminE2ETest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-09-06T21:18:08.229+02:00  INFO 62763 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.poisonedyouth.nota.Application for test class com.poisonedyouth.nota.admin.AdminE2ETest
Started admin root path should redirect to overview()
Passed admin root path should redirect to overview()
Started admin overview should display correct statistics and user data()
Passed admin overview should display correct statistics and user data()
Started admin link should be visible only to admin users()
2025-09-06T21:18:09.038+02:00  WARN 62763 --- [           main] actStandardFragmentInsertionTagProcessor : [THYMELEAF][main][notes/list] Deprecated unwrapped fragment expression "notes/fragments :: note-card(note=${note})" found in template notes/list, line 72, col 26. Please use the complete syntax of fragment expressions instead ("~{notes/fragments :: note-card(note=${note})}"). The old, unwrapped syntax for fragment expressions will be removed in future versions of Thymeleaf.
Passed admin link should be visible only to admin users()
Started non-admin users should not be able to access admin overview()
Passed non-admin users should not be able to access admin overview()
Passed AdminE2ETest
Started AdminControllerTest
Started showAdminOverview should redirect to login when user is not authenticated()
2025-09-06T21:18:09.361+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:09.361+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:09.361+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed showAdminOverview should redirect to login when user is not authenticated()
Started admin access should work with different admin usernames if isAdmin logic changes()
2025-09-06T21:18:09.363+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:09.363+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:09.363+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed admin access should work with different admin usernames if isAdmin logic changes()
Started showAdminOverview should handle empty user statistics()
2025-09-06T21:18:09.366+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:09.366+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:09.366+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed showAdminOverview should handle empty user statistics()
Started redirectToOverview should redirect to admin overview()
2025-09-06T21:18:09.369+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:09.369+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:09.369+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed redirectToOverview should redirect to admin overview()
Started showAdminOverview should return admin overview for admin user()
2025-09-06T21:18:09.371+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:09.371+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:09.371+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed showAdminOverview should return admin overview for admin user()
Started showAdminOverview should redirect to login when user is not admin()
2025-09-06T21:18:09.375+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:09.375+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:09.375+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed showAdminOverview should redirect to login when user is not admin()
Passed AdminControllerTest
Started ActivityEventListenerTest
Started handleActivityEvent should log LoginEvent()
Passed handleActivityEvent should log LoginEvent()
Started handleActivityEvent should log UpdateNoteEvent()
Passed handleActivityEvent should log UpdateNoteEvent()
Started handleActivityEvent should log ArchiveNoteEvent()
Passed handleActivityEvent should log ArchiveNoteEvent()
Started should handle events with empty or null titles gracefully()
Passed should handle events with empty or null titles gracefully()
Started should handle multiple events in sequence()
Passed should handle multiple events in sequence()
Started handleActivityEvent should log ShareNoteEvent()
Passed handleActivityEvent should log ShareNoteEvent()
Started handleActivityEvent should log CreateNoteEvent()
Passed handleActivityEvent should log CreateNoteEvent()
Passed ActivityEventListenerTest
Started AdminServiceTest
Started disableUser should not disable admin user()
Passed disableUser should not disable admin user()
Started disableUser should disable regular user successfully()
Passed disableUser should disable regular user successfully()
Started disableUser should return false for non-existent user()
Passed disableUser should return false for non-existent user()
Started isAdmin should return false for user with USER role()
Passed isAdmin should return false for user with USER role()
Started getAllUserStatistics should return empty list when no users exist()
Passed getAllUserStatistics should return empty list when no users exist()
Started getSystemStatistics should return correct system statistics()
Passed getSystemStatistics should return correct system statistics()
Started isAdmin should return true for user with ADMIN role()
Passed isAdmin should return true for user with ADMIN role()
Started getAllUserStatistics should return statistics for all users()
Passed getAllUserStatistics should return statistics for all users()
Started getSystemStatistics should handle zero counts()
Passed getSystemStatistics should handle zero counts()
Started enableUser should return false for non-existent user()
Passed enableUser should return false for non-existent user()
Started enableUser should enable disabled user successfully()
Passed enableUser should enable disabled user successfully()
Started isAdmin should return false for non-existent user()
Passed isAdmin should return false for non-existent user()
Passed AdminServiceTest
Started UserRestControllerTest
Started should return unauthorized for invalid credentials()
2025-09-06T21:18:09.398+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:09.398+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:09.398+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed should return unauthorized for invalid credentials()
Started should login user successfully()
2025-09-06T21:18:09.403+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:09.403+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:09.403+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed should login user successfully()
Started should register user successfully()
2025-09-06T21:18:09.408+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:09.408+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:09.408+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed should register user successfully()
Started should return error when username already exists()
2025-09-06T21:18:09.414+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:09.414+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:09.414+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed should return error when username already exists()
Started should return forbidden for disabled user()
2025-09-06T21:18:09.419+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:09.419+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:09.419+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed should return forbidden for disabled user()
Passed UserRestControllerTest
Started ArchitectureTest
Started repositories should be interfaces()
Passed repositories should be interfaces()
Started config classes should not use repositories()
Passed config classes should not use repositories()
Started admin controllers should follow layered architecture()
Passed admin controllers should follow layered architecture()
Started note controllers should follow layered architecture()
Passed note controllers should follow layered architecture()
Started controllers should not contain Repository in their source code()
Passed controllers should not contain Repository in their source code()
Started root packages have proper separation()
Passed root packages have proper separation()
Started controllers should use services through constructor injection()
Passed controllers should use services through constructor injection()
Started services should be the primary users of repositories()
Passed services should be the primary users of repositories()
Started activity controllers should follow layered architecture()
Passed activity controllers should follow layered architecture()
Started user controllers should follow layered architecture()
Passed user controllers should follow layered architecture()
Passed ArchitectureTest
Started NotaUserDetailsServiceTest
Started should load user and map to UserPrincipal()
Passed should load user and map to UserPrincipal()
Started should throw when user not found()
Passed should throw when user not found()
Passed NotaUserDetailsServiceTest
Started SessionAuthenticationFilterTest
Started should not authenticate when user no longer exists()
Passed should not authenticate when user no longer exists()
Started should handle invalid user object in session gracefully()
Passed should handle invalid user object in session gracefully()
Started should skip authentication for actuator endpoints()
Passed should skip authentication for actuator endpoints()
Started should set authentication when user exists in session()
Passed should set authentication when user exists in session()
Started should not authenticate when user is disabled()
Passed should not authenticate when user is disabled()
Started should skip authentication for static resources()
Passed should skip authentication for static resources()
Started should skip authentication for public auth endpoints()
Passed should skip authentication for public auth endpoints()
Started should skip when already authenticated()
Passed should skip when already authenticated()
Started should not set authentication when no session exists()
Passed should not set authentication when no session exists()
Started should not set authentication when no user in session()
Passed should not set authentication when no user in session()
Passed SessionAuthenticationFilterTest
Started NoteSharingE2ETest
2025-09-06T21:18:10.265+02:00  INFO 62763 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.poisonedyouth.nota.notes.NoteSharingE2ETest]: NoteSharingE2ETest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-09-06T21:18:10.265+02:00  INFO 62763 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.poisonedyouth.nota.Application for test class com.poisonedyouth.nota.notes.NoteSharingE2ETest
Started Prevent sharing with non-existent user()
Passed Prevent sharing with non-existent user()
Started Share note with multiple users()
Passed Share note with multiple users()
Started Complete note sharing workflow()
Passed Complete note sharing workflow()
Passed NoteSharingE2ETest
Started NoteControllerTest
Started searchNotes should use searchAccessibleNotes when all parameter is true()
2025-09-06T21:18:10.921+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:10.921+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:10.921+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed searchNotes should use searchAccessibleNotes when all parameter is true()
Started searchNotes should handle empty query parameter()
2025-09-06T21:18:10.926+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:10.927+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:10.927+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed searchNotes should handle empty query parameter()
Started archiveNote should return archive response fragment for HTMX request()
2025-09-06T21:18:10.931+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:10.931+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:10.931+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed archiveNote should return archive response fragment for HTMX request()
Started searchNotes should return notes container fragment for HTMX request()
2025-09-06T21:18:10.981+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:10.981+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:10.981+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed searchNotes should return notes container fragment for HTMX request()
Started showNoteDetail should redirect when user not authenticated()
2025-09-06T21:18:10.986+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:10.986+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:10.986+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed showNoteDetail should redirect when user not authenticated()
Started showNoteDetail should return detail view when note exists()
2025-09-06T21:18:10.990+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:10.990+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:10.990+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed showNoteDetail should return detail view when note exists()
Started showNoteDetail should redirect when note not found()
2025-09-06T21:18:11.003+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:11.003+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:11.003+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed showNoteDetail should redirect when note not found()
Started searchNotes should return list view with search results for regular request()
2025-09-06T21:18:11.010+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:11.011+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:11.011+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed searchNotes should return list view with search results for regular request()
Started listNotes should return list view with notes()
2025-09-06T21:18:11.018+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:11.018+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:11.018+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed listNotes should return list view with notes()
Started searchNotes should return empty results when no matches found()
2025-09-06T21:18:11.023+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:11.023+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:11.023+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed searchNotes should return empty results when no matches found()
Started listNotes should return list view with empty list when no notes exist()
2025-09-06T21:18:11.032+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:11.032+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:11.032+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed listNotes should return list view with empty list when no notes exist()
Started archiveNote should return redirect for regular request()
2025-09-06T21:18:11.037+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:11.037+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:11.037+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed archiveNote should return redirect for regular request()
Passed NoteControllerTest
Started SecurityConfigTest
2025-09-06T21:18:11.043+02:00  INFO 62763 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.poisonedyouth.nota.config.SecurityConfigTest]: SecurityConfigTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-09-06T21:18:11.048+02:00  INFO 62763 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.poisonedyouth.nota.Application for test class com.poisonedyouth.nota.config.SecurityConfigTest
Started should allow POST to auth register()
Passed should allow POST to auth register()
Started should allow POST to auth login()
Passed should allow POST to auth login()
Started should allow access to static resources()
Passed should allow access to static resources()
Started should allow access to actuator endpoints()
Passed should allow access to actuator endpoints()
Started should allow access to auth login endpoint()
Passed should allow access to auth login endpoint()
Started should require authentication for protected endpoints()
Passed should require authentication for protected endpoints()
Started should block access to unknown protected endpoints()
Passed should block access to unknown protected endpoints()
Started should allow access to auth register endpoint()
Passed should allow access to auth register endpoint()
Started should require authentication for admin endpoints()
Passed should require authentication for admin endpoints()
Passed SecurityConfigTest
Started ActivityLogServiceTest
Started getActivitiesPage should return paginated activities()
Passed getActivitiesPage should return paginated activities()
Started getRecentActivities should return limited activities()
Passed getRecentActivities should return limited activities()
Started logActivity should save activity log()
Passed logActivity should save activity log()
Started getAllActivities should return all activities for user()
Passed getAllActivities should return all activities for user()
Passed ActivityLogServiceTest
Started NoteRestControllerTest
Started should list notes successfully()
2025-09-06T21:18:11.363+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:11.363+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:11.363+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed should list notes successfully()
Started should update note successfully()
2025-09-06T21:18:11.377+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:11.377+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:11.377+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed should update note successfully()
Started should return bad request when updating note with blank title()
2025-09-06T21:18:11.394+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:11.394+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:11.394+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-09-06T21:18:11.400+02:00  WARN 62763 --- [           main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<?> com.poisonedyouth.nota.notes.NoteRestController.updateNote(long,com.poisonedyouth.nota.notes.UpdateNoteDto,jakarta.servlet.http.HttpSession): [Field error in object 'updateNoteDto' on field 'title': rejected value []; codes [NotBlank.updateNoteDto.title,NotBlank.title,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [updateNoteDto.title,title]; arguments []; default message [title]]; default message [Title is required]] ]
Passed should return bad request when updating note with blank title()
Started should return bad request when updating note with blank content()
2025-09-06T21:18:11.403+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:11.403+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:11.403+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed should return bad request when updating note with blank content()
Started should search notes successfully()
2025-09-06T21:18:11.410+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:11.410+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:11.410+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed should search notes successfully()
Started should list notes with custom sorting()
2025-09-06T21:18:11.419+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:11.419+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:11.419+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed should list notes with custom sorting()
Started should return bad request when creating note with blank title()
2025-09-06T21:18:11.426+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:11.427+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:11.427+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
2025-09-06T21:18:11.429+02:00  WARN 62763 --- [           main] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<?> com.poisonedyouth.nota.notes.NoteRestController.createNote(com.poisonedyouth.nota.notes.CreateNoteDto,jakarta.servlet.http.HttpSession): [Field error in object 'createNoteDto' on field 'title': rejected value []; codes [NotBlank.createNoteDto.title,NotBlank.title,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [createNoteDto.title,title]; arguments []; default message [title]]; default message [Title is required]] ]
Passed should return bad request when creating note with blank title()
Started should return not found when note does not exist()
2025-09-06T21:18:11.431+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:11.431+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:11.432+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed should return not found when note does not exist()
Started should create note successfully()
2025-09-06T21:18:11.434+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:11.434+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:11.434+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed should create note successfully()
Started should get note by id successfully()
2025-09-06T21:18:11.440+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:11.441+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:11.441+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed should get note by id successfully()
Started should search accessible notes when all parameter is true()
2025-09-06T21:18:11.445+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:11.445+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:11.445+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed should search accessible notes when all parameter is true()
Started should list shared notes successfully()
2025-09-06T21:18:11.450+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:11.450+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:11.450+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed should list shared notes successfully()
Started should archive note successfully()
2025-09-06T21:18:11.457+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:11.457+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:11.457+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed should archive note successfully()
Started should return not found when archiving non-existent note()
2025-09-06T21:18:11.461+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:11.461+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:11.461+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed should return not found when archiving non-existent note()
Started should list all accessible notes successfully()
2025-09-06T21:18:11.465+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:11.465+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:11.465+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed should list all accessible notes successfully()
Started should return bad request when note content is empty()
2025-09-06T21:18:11.470+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:11.471+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:11.471+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed should return bad request when note content is empty()
Started should return not found when updating non-existent note()
2025-09-06T21:18:11.476+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:11.476+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:11.476+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed should return not found when updating non-existent note()
Started should return unauthorized when not authenticated for create note()
2025-09-06T21:18:11.481+02:00  INFO 62763 --- [           main] o.s.mock.web.MockServletContext          : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:11.481+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:11.481+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed should return unauthorized when not authenticated for create note()
Passed NoteRestControllerTest
Started ActivityLogIntegrationTest
2025-09-06T21:18:11.484+02:00  INFO 62763 --- [           main] t.c.s.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.poisonedyouth.nota.activitylog.ActivityLogIntegrationTest]: ActivityLogIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-09-06T21:18:11.485+02:00  INFO 62763 --- [           main] .b.t.c.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.poisonedyouth.nota.Application for test class com.poisonedyouth.nota.activitylog.ActivityLogIntegrationTest
Started showActivityLog should redirect to login for unauthenticated user()
2025-09-06T21:18:11.486+02:00  INFO 62763 --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:11.486+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:11.486+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed showActivityLog should redirect to login for unauthenticated user()
Started showActivityLog should return activity log view for authenticated user()
2025-09-06T21:18:11.488+02:00  INFO 62763 --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:11.488+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:11.488+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed showActivityLog should return activity log view for authenticated user()
Started showActivityLog should respect page and size parameters()
2025-09-06T21:18:11.493+02:00  INFO 62763 --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:11.493+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:11.493+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed showActivityLog should respect page and size parameters()
Started activity logging should work for note operations()
2025-09-06T21:18:11.500+02:00  INFO 62763 --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:11.500+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:11.500+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed activity logging should work for note operations()
Started showActivityLog should handle second page correctly()
2025-09-06T21:18:11.503+02:00  INFO 62763 --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2025-09-06T21:18:11.503+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''
2025-09-06T21:18:11.503+02:00  INFO 62763 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 0 ms
Passed showActivityLog should handle second page correctly()
Passed ActivityLogIntegrationTest
Started com.poisonedyouth.nota.notes.NoteSharingServiceTest
Started shareNote
Started should successfully share note with valid user
Passed should successfully share note with valid user
Started should fail when user not found
Passed should fail when user not found
Started should fail when note not found
Passed should fail when note not found
Started should fail when target user not found
Passed should fail when target user not found
Started should fail when trying to share with self
Passed should fail when trying to share with self
Started should fail when note already shared with user
Passed should fail when note already shared with user
Passed shareNote
Started revokeNoteShare
Started should successfully revoke share
Passed should successfully revoke share
Started should fail when user not found
Passed should fail when user not found
Passed revokeNoteShare
Started getNoteShares
Started should return shares for valid note
Passed should return shares for valid note
Started should return empty list when user not found
Passed should return empty list when user not found
Passed getNoteShares
Started findAllSharedNotes
Started should return shared notes for user
Passed should return shared notes for user
Passed findAllSharedNotes
Started canUserAccessNote
Started should return true when user can access note
Passed should return true when user can access note
Started should return false when user cannot access note
Passed should return false when user cannot access note
Passed canUserAccessNote
Passed com.poisonedyouth.nota.notes.NoteSharingServiceTest
Test run finished after 13184 ms
[        51 containers found      ]
[         0 containers skipped    ]
[        51 containers started    ]
[         0 containers aborted    ]
[        51 containers successful ]
[         0 containers failed     ]
[       290 tests found           ]
[         0 tests skipped         ]
[       290 tests started         ]
[         0 tests aborted         ]
[       290 tests successful      ]
[         0 tests failed          ]
2025-09-06T21:18:11.653+02:00  INFO 62763 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-09-06T21:18:11.654+02:00  INFO 62763 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-09-06T21:18:11.655+02:00  INFO 62763 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-09-06T21:18:11.656+02:00  INFO 62763 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-09-06T21:18:11.657+02:00  INFO 62763 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-09-06T21:18:11.657+02:00  INFO 62763 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-09-06T21:18:11.657+02:00  INFO 62763 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
Hibernate: drop table if exists activity_log cascade
Hibernate: drop table if exists note_attachments cascade
Hibernate: drop table if exists note_shares cascade
Hibernate: drop table if exists notes cascade
Hibernate: drop table if exists users cascade
